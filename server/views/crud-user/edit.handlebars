{{#extend 'styles'}}
  <style>
    .error {
      color: red;
    }
    .success {
      color: green;
    }
    .verifyImg{
      width: 300px;
      height: 300px;
    }
    .strech{
      padding-left: 5;
    }
    .error {
      color: red;
    }
    .success {
      color: green;
    }
    .paddingLeft20{
      padding-left:30px;
    }
    .paddingLeft10{
      padding-left:10px;
    }
    .form-group{
      margin-bottom: 15px!important;
    }
    .form-control-feedback
    {
      right:10px!important;
    }
    .photo_container
    {
      overflow: scroll;
      max-width: 100%;  
      max-height: 100%; 
    }
  </style>
  <!-- daterange picker -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.min.css" />
<!-- <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">  -->

<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
  <link rel="stylesheet" href="/admin/plugins/daterangepicker/daterangepicker-bs3.css">
  <!-- iCheck for checkboxes and radio inputs -->
  <link rel="stylesheet" href="/admin/plugins/iCheck/all.css">
  <!-- Bootstrap Color Picker -->
  <link rel="stylesheet" href="/admin/plugins/colorpicker/bootstrap-colorpicker.min.css">
  <!-- Bootstrap time Picker -->
  <link rel="stylesheet" href="/admin/plugins/timepicker/bootstrap-timepicker.min.css">
  <!-- Select2 -->
  <link rel="stylesheet" href="/admin/plugins/select2/select2.min.css">
{{/extend}}
<!-- Content Header (Page header) -->
<section class="content-header">
  <h1>
    Edit User
    <small>Edit User info</small>
  </h1>
  <ol class="breadcrumb">
    <li><a href="{{{url 'dashboard.v1'}}}"><i class="fa fa-dashboard"></i> Home</a></li>
    <li><a href="{{{url 'user.list'}}}">List</a></li>
    <li class="active">Edit User</li>
  </ol>
</section>
<script type="text/javascript">

      function setUrl(url){
        document.getElementById('photo').src=url;
      }
      function setProfileUrl(data){
        var url;
        if (data=='profilePhotoURL'){
          url = document.getElementById('profilePhotoURL').value;
        }else if(data=="income_photo"){
          url = document.getElementById('income_photo').value;
        }else if (data=="education_photo"){
          url = document.getElementById('education_photo').value;
        }else if (data=="profession_photo"){
          url = document.getElementById('profession_photo').value;  
        }
        document.getElementById('profile_verify_photo').src=url;
      }
</script>
<!-- Main content -->
<section class="content">
  <div class="row">
    <div class="col-md-12">
      {{#if message}}
        {{{message}}}
      {{/if}}
      <div class="box box-info">
        <div class="box-header with-border">
          <h3 class="box-title">User Info</h3>
        </div>
        <!-- form -->
        <form action="/crud/user/{{crud_user.id}}?_method=put" method="post">
          <div class="box-body">
            <div class="form-group has-feedback col-sm-3 col-xs-12">
                <label for="name">name:</label>
                <input type="text" class="form-control" name="user[name]" placeholder="name" id="name" value="{{crud_user.name}}" >
                <span class="glyphicon glyphicon-user form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback col-sm-3 col-xs-12">
                <label for="email">email:</label>
                <input type="text" class="form-control" name="user[email]" placeholder="email" id="email" value="{{crud_user.email}}" >
                <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback col-sm-3 col-xs-12">
                <label for="latitude">location(latitude):</label>
                <input type="text" class="form-control" name="user[latitude]" placeholder="latitude" id="email" value="{{crud_user.location.latitude}}" >
                <span class="glyphicon glyphicon-map-marker form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback col-sm-3 col-xs-12">
                <label for="longitude">location(longitude):</label>
                <input type="text" class="form-control" name="user[longitude]" placeholder="longitude" id="email" value="{{crud_user.location.longitude}}" >
                <span class="glyphicon glyphicon-map-marker form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback col-sm-3 col-xs-12">
                <label for="age">age:</label>
                <input type="number" class="form-control" name="user[age]" placeholder="age" id="age" value="{{crud_user.age}}" >
                <span class="glyphicon glyphicon-paperclip form-control-feedback"></span>
            </div>
            <div class="form-group col-sm-3 col-xs-12">
                <label for="gender">gender:</label>
                <select class="form-control" name="user[gender]" placeholder="gender" id="gender">
                  <option value="" disabled selected>choose one</option>
                  <option value="0">male</option>
                  <option value="1">female</option>
                </select>
            </div>
            <div class="form-group has-feedback col-sm-3 col-xs-12">
                <label for="income">income:</label>
                <input type="number" class="form-control" name="user[income]" placeholder="income" id="income" value="{{crud_user.income}}" required/>
                <span class="glyphicon glyphicon-usd form-control-feedback"></span>
            </div>
            <div class="form-group col-sm-3 col-xs-12">
                <label for="currency_type">currency_type:</label>
                <select class="form-control" name="user[currency_type]" placeholder="currency_type" id="currency_type">
                  <option value="" disabled selected>choose one</option>
                  <option value="USD">USD</option>
                  <option value="HKD">HKD</option>
                </select>
            </div>
            <div class="form-group has-feedback col-sm-6 col-xs-12">
                <label for="school">school:</label>
                <input type="text" class="form-control" name="user[school]" placeholder="school" value="{{crud_user.school}}" id="school" >
                <span class="glyphicon glyphicon-education form-control-feedback"></span>
            </div>
            <div class="form-group has-feedback col-sm-3 col-xs-12">
                <label for="school_email">school email:</label>
                <input type="text" class="form-control" name="user[school_email]" placeholder="school_email" value="{{crud_user.school_email}}" id="school_email" >
                <span class="glyphicon glyphicon-envelope form-control-feedback"></span>
            </div>
            <div class="form-group col-sm-3 col-xs-12">
                <label for="school_type">school_type:</label>
                <select class="form-control" name="user[school_type]" placeholder="school_type" id="school_type">
                  <option value="" disabled selected>choose one</option>
                  <option value="0">non-college</option>
                  <option value="1">college</option>
                  <option value="2">university</option>
                </select>
            </div>
            <div class="form-group has-feedback col-sm-12 col-xs-12">
                <label for="job">job:</label>
                <input type="text" class="form-control" name="user[job]" placeholder="job" id="job" value="{{crud_user.job}}" >
                <span class="glyphicon glyphicon-globe form-control-feedback"></span>
            </div>
<!--             <div class="form-group col-sm-12 col-xs-12">
              <label for="profile_photo">profile_photo:</label>
              <div class="input-group">
                <input type="text" class="form-control" name="user[profile_photo]" placeholder="profilePhotoURL" id="profilePhotoURL" value="{{profilePhotoURL}}" >
                <span class="input-group-btn">
                  <button class="btn btn-success" type="button" onclick="setProfileUrl('profilePhotoURL')" data-toggle="modal" data-target="#myModal">show!</button>
                </span>
              </div>
            </div> -->
            <div class="form-group col-sm-12 col-xs-12">
              <label for="photos">photos:</label>
              {{#each crud_user.photos}}
              <br>
              <div class="input-group">
                <!-- <label for="photos">photos:</label> -->
                <input type="text" class="form-control" name="user[photo_{{@index}}]" placeholder="photo_url" id="photo_{{@index}}" value="{{this}}" >
                <span class="input-group-btn">
                  <button id="button_{{@index}}" onclick="setUrl('{{this}}')" class="btn btn-success" type="button" data-toggle="modal" data-target="#myPhoto">show!</button>
                </span>
              </div>
              {{/each}}
            </div>
            <div class="form-group col-sm-12 col-xs-12">
              <label for="income_photo">verify income photo:</label>
              <div class="input-group col-sm-12">
                <input type="text" class="form-control" name="user[income_photo]" placeholder="income_photo" id="income_photo" value="{{verifyImgURL.income}}" >
                <span class="input-group-btn">
                  <button class="btn btn-success" type="button" onclick="setProfileUrl('income_photo')" data-toggle="modal" data-target="#myModal">show!</button>
                  <input id="income_verify" {{income_verified}} name="user[income_verified]" type="checkbox" data-toggle="toggle">
                </span>
              </div>
            </div>
            <div class="form-group col-sm-12 col-xs-12">
              <label for="profession_photo">verify profession photo:</label>
              <div class="input-group col-sm-12">
                <input type="text" class="form-control" name="user[profession_photo]" placeholder="profession_photo" id="profession_photo" value="{{verifyImgURL.profession}}" >
                <span class="input-group-btn">
                  <button class="btn btn-success" type="button" onclick="setProfileUrl('profession_photo')" data-toggle="modal" data-target="#myModal">show!</button>
                  <input id="profession_verify" {{profession_verified}} type="checkbox" data-toggle="toggle" name="user[profession_verify]">
                </span>
              </div>
            </div>
            <div class=" form-group col-sm-12 col-xs-12">
              <label for="education_photo">verify education photo:</label>
              <div class="input-group col-sm-12">
                <input type="text" class="form-control" name="user[education_photo]" placeholder="education_photo" id="education_photo" value="{{verifyImgURL.education}}" >
                <span class="input-group-btn">
                  <button class="btn btn-success" type="button" onclick="setProfileUrl('education_photo')" data-toggle="modal" data-target="#myModal">show!</button>
                  <input id="education_verify" {{education_verified}} type="checkbox" data-toggle="toggle" name='user[education_verify]'>
                </span>
              </div>
            </div>
            <div class="form-group has-feedback col-sm-12 col-xs-12">
                <label for="about">about:</label>
                <textarea class="form-control" value="{{crud_user.about}}" rows="2" id="about" name="user[about]" >{{crud_user.about}}</textarea>
            </div>
          </div>
          <!-- /.box-body -->
          <div class="box-footer">
            <button type="submit" class="btn btn-primary">Update</button>
            <button type="button" class="btn btn-default" onclick="location.href = '{{{url "user.list"}}}'">Cancel</button>
          </div>
          <!-- /.box-footer -->
        </form>
        <!-- /form -->
      </div>
      <!-- /.box -->
    </div>
    <!-- /.col-md-6 -->
  </div>
  <!-- /.row -->
</section>

<!-- modal dialog -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{crud_user.name}}</h4>
      </div>
      <div class="modal-body">
        <div class=".photo_container">
          <img id="profile_verify_photo" width="100%" height="100%">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<div id="myPhoto" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">{{crud_user.name}}</h4>
      </div>
      <div class="modal-body">
        <div class=".photo_container">
          <img id="photo" width="100%" height="100%">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- /.section -->
<script type="text/javascript">
  $(document).ready(function(){
      $("#gender").val("{{crud_user.gender}}");
      $("#currency_type").val("{{crud_user.currency_type}}");
      $("#school_type").val("{{crud_user.school_type}}");
  });
</script>